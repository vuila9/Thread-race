#include "defs.h"/*   Function: updateDorcDisplay    Purpose: update dorc avatar at current and new position         in: pointer to EntityType object         in: new row position         in: new path position     return: none*/void updateDorcDisplay(EntityType *dorc, int row, int tempCol){   scrPrt(" ", dorc->currPos, dorc->path);   for (int i = 0; i < race->numRunners; i++){      if (runnerAt(i)->ent.currPos == dorc->currPos && runnerAt(i)->ent.path == dorc->path)         scrPrt(runnerAt(i)->ent.avatar, runnerAt(i)->ent.currPos, runnerAt(i)->ent.path);            }               scrPrt(dorc->avatar, (dorc->currPos + row), tempCol);         for (int i = 0; i < race->numRunners; i++){      if (runnerAt(i)->ent.currPos == (dorc->currPos + row) && runnerAt(i)->ent.path == tempCol)         scrPrt(runnerAt(i)->ent.avatar, runnerAt(i)->ent.currPos, runnerAt(i)->ent.path);   }}/*   Function: *goDorc    Purpose: a thread function that moving a dorc on the race track with randomized step forward         in: pointer to the EntityType thread     return: none*/void *goDorc(void *arg){   EntityType *dorc = (EntityType*) arg;   int row, lrm, even;   int tempCol;   char hp[MAX_BUF];      while (dorc->currPos != START_POS){      tempCol = dorc->path;      row = randm(5) + 1;      if (dorc->currPos + row >= START_POS)         row = START_POS - dorc->currPos;                       lrm = randm(3);      if (lrm == 0){ // left         tempCol = tempCol - 2;      }      else if (lrm == 1){ // right         tempCol = tempCol + 2;      }      if (tempCol <= PATH_1)         tempCol = PATH_1;      else if (tempCol >= PATH_2)         tempCol = PATH_2;      else {         even =  PATH_1 + PATH_2;         if ((even%2) == 1)            even += 1;         tempCol = even/2 ;      }      // update dorc avatar at current and new position      if (sem_wait(&(race->mutex))){         printf("semaphore wait error\n");         exit(1);      }       updateDorcDisplay(dorc, row, tempCol);                   if (sem_post(&(race->mutex))){         printf("semaphore post error\n");         exit(1);      }                   dorc->currPos = dorc->currPos + row;      dorc->path = tempCol;                  usleep(700000);   }   if (sem_wait(&(race->mutex))){      printf("semaphore wait error\n");      exit(1);   }    scrPrt(" ", dorc->currPos, dorc->path);       if (sem_post(&(race->mutex))){      printf("semaphore post error\n");      exit(1);   }       return 0;}