#include "defs.h"/*   Function: main    Purpose: call functions, initialize instances     To use: compile using makefile via GCC      Author: John Nguyen     */int main (){   RunnerType *runner;        EntityType *dwOrc;   int allDead = C_FALSE;   int raceOver = C_FALSE;   int rng;   char stt[MAX_BUF];         initRaceInfoType();   createRunner(runner,"Timmy","T",PATH_1);   createRunner(runner,"Harold","H",PATH_2);   createRunner(runner,"Baba","B",PATH_2 + 4);   createRunner(runner,"Duke","D",PATH_1 - 4);     srand((unsigned)time(NULL));         initGUI();       for (int i = 0; i < race->numRunners; i++)      pthread_create(&(runnerAt(i)->ent.thr), NULL, goRunner, runnerAt(i));      while (strlen(race->winner) == 0 && allDead == C_FALSE && raceOver == C_FALSE){      rng = randm(10);      if (rng < DORC_FREQ){                dwOrc = malloc(sizeof(EntityType));         initDorcs(dwOrc);         addDorc(dwOrc);         pthread_create(&(dorcAt(race->numDorcs-1)->thr), NULL, goDorc, dorcAt(race->numDorcs-1));      }      if (updateDead() == race->numRunners)         allDead = C_TRUE;      if ((updateFinisher()+updateDead()) == race->numRunners)         raceOver = C_TRUE;      usleep(250000);         }   for (int i = 0; i < race->numRunners; i++)      pthread_join(runnerAt(i)->ent.thr, NULL);      for (int i = 0; i < race->numDorcs; i++)      pthread_cancel(dorcAt(i)->thr);         for (int i = 0; i < race->numDorcs; i++)      pthread_join(dorcAt(i)->thr, NULL);              if (updateDead() == race->numRunners){      sprintf(stt,"OUTCOME: All runners died");              scrPrt(stt, race->statusRow, HEALTH_COL);             }      else if (strlen(race->winner) != 0){      sprintf(stt,"OUTCOME: %s is the winner!", race->winner);           scrPrt(stt, race->statusRow, HEALTH_COL);         }      cleanupNcurses(START_POS + 2);      cleanUp();   return 0;}